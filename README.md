# KuhlmannGoodShahidCloer_ENV872_EDE_FinalProject
EDE final project

# Exploring Variables Impacting Asthma Rates and Birth Weight in California 

<Instructions: copy and paste this template into your project README file (found in the parent folder of the repository). Fill in relevant information as requested.>

<General notes: add as much information as is relevant for your repository. Some overarching guidelines are provided, but feel free to expand on these guidelines.>
<More resources found here: https://www.dataone.org/all-best-practices>
<Delete the text inside the brackets when formatting your file.>

## Summary

<describe the purpose of this repository, the information it contains, and any relevant analysis goals. What, why, where, when, how?>

This repository contains code and data for our project investigating asthma rates and low birth weights in relation to PM 2.5, wildfire rates and socioeconomic status in California.There is a Metadata folder containing information on each of the datasets.The Code folder contains all of the coding files relating to exploratory analysis, data wrangling and data visualizations. The Data Folder contains Raw data and Processed data files. Raw data was downloaded from the respective online databases and processed within R, subsequently stored in the Processed folder. 

Our analysis consists of running multiple linear regression models, heatmaps and scatterplots to determine which variables significantly impact low birth weights at term (tLBW) and asthma rates. We are looking at 36 counties across California for which we have complete data for the years 2005-2019.

## Investigators

<name(s), affiliation(s), contact information, roles (if applicable)>

Ashton Cloer,Duke University
Elizabeth Good,Duke University
Emily Kuhlmann,Duke University, emily.kuhlmann@duke.edu
Sakina Shahid,Duke University, ss1392@duke.edu

## Keywords

<add relevant keywords here>

pm2.5, asthma, tLBW, california, wildfire

## Database Information

<describe the origin of all data in the repository, including data collected from outside sources and new data generated by the investigator(s). If data was accessed from an outside database, the date(s) of data access should also be included.>

Data of Percentage of low term birth weights, asthma rates (accessed 11/09/2023) and socioeconomic status by counties in California comes from the CDC National Environmental Public Health Tracking Network.

https://ephtracking.cdc.gov/DataExplorer/

County population data were pulled using the 'tidycensus' package in R. Annual American Community Survey data for counties with populations greater than 65,000 were accessed. 

## Folder structure, file formats, and naming conventions 

<describe the folders contained in the repository, including what type of files they contain>
The repository contains a Code folder which has all data processing R files for each individual variable and the files with the analytical model code. There is also a Data folder, with Raw and Processed folders within. The Raw folder contains unprocessed .csv files pulled from the data sources. The Processed folder contains wrangled datasets for each variable.  
<describe the formats of files for the various purposes contained in the repository>
The data files are all in .csv format and the code are in R files or RMD files. 
<describe your file naming conventions>
For individual variables, the file name contains the variable name, CA, and will say if it is processed. Similarly, the code files are named after the variable and the purpose of the file (e.g. data visualization or data processing). 

## Metadata

<For each data file in the repository, describe the data contained in each column. Include the column name, a description of the information, the class of data, and any units associated with the data. Create a list or table for each data file.> 

Raw/CA_Asthma_EDVisits.csv: 
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| StateFIPS | one-digit state FIPS number (6 for CA) | integer | NA |
| State | California  | factor | NA |
| CountyFIPS | 4-digit county FIPS number  | integer | NA |
| County | county name  | factor | NA |
| Year | year of data | integer | NA |
| Value | number of emergency department visits for asthma  | factor | number of visits |
| Data Comment | empty column for comments  | logi | NA |

Processed/Asthma_data_processed.csv:
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| CountyFIPS | 4-digit county FIPS number  | integer | NA |
| County | county name  | factor | NA |
| Year | year of data | integer | NA |
| Visits | number of emergency department visits for asthma  | integer | number of visits |
| Population | annual population for each county | integer | number of people |
| visits_per100k | number of emergency department visits for asthma per 100k people in the county | numeric | number of visits per 100k |

Processed/CA_population_data.csv:
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| CountyFIPS | 4-digit county FIPS number  | integer | NA |
| County | county name  | factor | NA |
| Year | year of data | integer | NA |
| Population | annual population for each county | integer | number of people |

Processed/CAcounties
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| County | names of all counties included in all datasets | factor | NA |

Raw/poverty05_19
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| StateFIPS | one-digit state FIPS number (6 for CA) | integer | NA |
| State | California | factor | NA |
| CountyFIPS | 4-digit county FIPS number | factor | NA |
| County | names of all counties included in all datasets | character | NA |
| Year | year of data | numeric | NA |
| Value | poverty rate for each county | numeric | percent |

Processed/poverty1_processed
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| CountyFIPS | 4-digit county FIPS number | factor | NA |
| County | names of all counties included in all datasets | character | NA |
| Year | year of data | numeric | NA |
| Percent_Poverty | poverty rate for each county | numeric | percent |
| Population | annual population for each county | integer | number of people |
| Poverty_per100k | poverty rate for each county normalized | numeric | number of people per 100k |

Processed/poverty_byyear_processed
| Column Name  | Description | Data Class | Units
| ------------- | ------------- | ------------- | ------------- |
| Year | year of data | numeric | NA |
| mean_percent | average poverty rate per year | numeric | percent |

## Scripts and code

<list any software scripts/code contained in the repository and a description of their purpose.>

1. DataProcessing_SocioEco.RMD: This RMD was used for data wrangling the socioeconomic data, normalizing the data, removing unnecessary counties, saving processed data files, and testing visualization and exploratory data techniques for the final project.
2. FinalCodeforSocio.RMD: Used to communicate final code needed for the final project that represents the socioeconomic data and exploratory analysis.
3. DataProcessing_Asthma.R: This code was used to wrangle the emergency department visits for asthma dataset from the CDC, join it with the processed county population data, normalize the number of emergency department visits by county population, and do initial data visualization.
4. DataVis_Asthma.R: This code provides the processed asthma data and creates the heatmap used in the final PDF.
5. PopulationData.R: This code was used to pull population data for California counties from 2005-2019 using the tidycensus package. It was also used to wrangle the data to inlude the necessary counties and other information. 

## Quality assurance/quality control

<describe any relevant QA/QC procedures taken with your data. Some ideas can be found here:>
<https://www.dataone.org/best-practices/develop-quality-assurance-and-quality-control-plan>
<https://www.dataone.org/best-practices/ensure-basic-quality-control>
<https://www.dataone.org/best-practices/communicate-data-quality>
<https://www.dataone.org/best-practices/identify-outliers>
<https://www.dataone.org/best-practices/identify-values-are-estimated>

To maintain QA/QC in our analysis, datasets were first checked individually for NAs and were noted amongst a list of counties to be removed. When combining individual datasets, the counties noted with NAs were removed and datasets were joined using variables with the same name, such as Year, CountyFIPS, and County. Secondly, variables of interest, such as poverty and asthma rates, were normalized as per 100k residents. Lastly, this repository was used to facilitate sharing code and the workload amongst the group members.  
